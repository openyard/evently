FROM golang:1.21.7-alpine3.19 AS build
RUN apk update && apk add --no-cache git
WORKDIR $GOPATH/src/
COPY . .
RUN go mod download
RUN go build -o /go/bin/customer-service ./cmd/pg-customer-service/main.go

FROM scratch AS release
LABEL org.opencontainers.image.vendor="Openyard ESÂ³"
LABEL org.opencontainers.image.authors="info@openyard.de"
COPY --from=build /go/bin/customer-service /bin/customer-service
ENTRYPOINT ["/bin/customer-service"]
